function checkDevice(){mq.addEventListener("webkitTransitionEnd",checkMediaQuery,!0),mq.addEventListener("MSTransitionEnd",checkMediaQuery,!0),mq.addEventListener("oTransitionEnd",checkMediaQuery,!0),mq.addEventListener("transitionend",checkMediaQuery,!0)}function checkMediaQuery(){mqSupport?(prevDevice=device,device=window.getComputedStyle(mq,":after").getPropertyValue("content").replace(/"|'/g,""),resetStyles()):device="desktop"}function parallexScroll(){var e=jQuery(window).scrollTop(),r=jQuery(".header");Modernizr.touch||jQuery(".banner",r).css({transform:"translate3d(0px,"+.4*e+"px, 0px)"})}function resetStyles(){}function hasScrolled(){var e=$(this).scrollTop();Math.abs(lastScrollTop-e)<=delta||(e>lastScrollTop&&e>subfooterHeight?$(".subfooter").removeClass("nav-down").addClass("nav-up"):e+$(window).height()<$(document).height()&&$(".subfooter").removeClass("nav-up").addClass("nav-down"),lastScrollTop=e)}var mq=jQuery("#js-mediaQueryReference")[0],mqSupport=Modernizr.mq("only all"),prevDevice="",device="",activeClass="is-active",loadedClass="is-loaded",sections=jQuery(".section"),primaryNav=jQuery("#primaryNav"),primaryNavLinks=primaryNav.find("a"),hamburger=jQuery(".js-hamburger");hamburger.on("click",function(){jQuery(this).toggleClass(activeClass),jQuery(this).children("span").toggleClass(activeClass),primaryNav.toggleClass(activeClass)}),primaryNavLinks.on("click",function(){"mobile"==device&&hamburger.click()}),jQuery(window).load(function(){jQuery(".bxslider").bxSlider({pagerType:"short"}),sections.waypoint(function(e){"down"===e&&(primaryNavLinks.removeClass(activeClass),jQuery('#primaryNav a[href="#'+jQuery(jQuery(this)[0].element).attr("id")+'"]').addClass(activeClass))},{offset:"17%"}),sections.waypoint(function(e){"up"===e&&(primaryNavLinks.removeClass(activeClass),jQuery('#primaryNav a[href="#'+jQuery(jQuery(this)[0].element).attr("id")+'"]').addClass(activeClass))},{offset:"-30%"})}),jQuery(window).scroll(function(){parallexScroll()}),jQuery(document).ready(function(){mqSupport&&(checkDevice(),checkMediaQuery()),"mobile"!=device&&primaryNav.fixTo("html"),jQuery(".js-logo").addClass(loadedClass),primaryNavLinks.smoothScroll({offset:-100})});var didScroll,lastScrollTop=0,delta=5,subfooterHeight=$(".subfooter").outerHeight();$(window).scroll(function(){didScroll=!0}),setInterval(function(){didScroll&&(hasScrolled(),didScroll=!1)},300);